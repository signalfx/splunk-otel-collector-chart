{
  "$schema": "http://json-schema.org/schema#",
  "type": "object",
  "required": [
    "cloudProvider",
    "distribution"
  ],
  "title": "Values",
  "additionalProperties": false,
  "properties": {
    "enabled": {
      "description": "Flag to enable splunk-otel-collector used as a subchart in other charts.",
      "type": "boolean"
    },
    "global": {
      "type": "object"
    },
    "nameOverride": {
      "description": "Override name of the chart used in Kubernetes object names.",
      "type": "string"
    },
    "namespaceOverride": {
      "description": "Override the deployment namespace of chart resources; default namespace is .Release.Namespace",
      "type": "string"
    },
    "fullnameOverride": {
      "description": "Override fully qualified app name.",
      "type": "string"
    },
    "clusterName": {
      "description": "Cluster name that will be used as metadata attributes for all telemetry data",
      "type": "string"
    },
    "splunkPlatform": {
      "description": "Splunk Cloud / Splunk Enterprise configuration",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "endpoint": {
          "description": "Splunk Platform Endpoint",
          "example": "http://localhost:8088/services/collector",
          "type": "string"
        },
        "token": {
          "description": "Splunk Platform HEC Token",
          "type": "string"
        },
        "index": {
          "description": "Name of Splunk index targeted.",
          "type": "string"
        },
        "metricsIndex": {
          "type": "string"
        },
        "tracesIndex": {
          "type": "string"
        },
        "source": {
          "type": "string"
        },
        "sourcetype": {
          "type": "string"
        },
        "maxConnections": {
          "type": "integer"
        },
        "disableCompression": {
          "type": "boolean"
        },
        "timeout": {
          "type": "string"
        },
        "idleConnTimeout": {
          "type": "string"
        },
        "insecureSkipVerify": {
          "type": "boolean"
        },
        "clientCert": {
          "type": "string"
        },
        "clientKey": {
          "type": "string"
        },
        "caFile": {
          "type": "string"
        },
        "logsEnabled": {
          "description": "Send Logs to Splunk Platform",
          "type": "boolean"
        },
        "metricsEnabled": {
          "description": "Send Metrics to Splunk Platform",
          "type": "boolean"
        },
        "tracesEnabled": {
          "description": "Send Traces to Splunk Platform",
          "type": "boolean"
        },
        "fieldNameConvention": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "renameFieldsSck": {
              "type": "boolean"
            },
            "keepOtelConvention": {
              "type": "boolean"
            }
          }
        },
        "retryOnFailure": {
          "description": "Retry configurations",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "initialInterval": {
              "type": "string"
            },
            "maxInterval": {
              "type": "string"
            },
            "maxElapsedTime": {
              "type": "string"
            }
          }
        },
        "sendingQueue": {
          "description": "Batching configurations for logs/traces/metrics",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "numConsumers": {
              "type": "integer"
            },
            "queueSize": {
              "type": "integer"
            },
            "persistentQueue": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "storagePath": {
                  "type": "string"
                }
              }
            }
          }
        },
        "fsyncEnabled": {
          "type": "boolean"
        }
      },
      "anyOf": [
        {
          "properties": {
            "logsEnabled": {
              "const": true
            }
          }
        },
        {
          "properties": {
            "metricsEnabled": {
              "const": true
            }
          }
        }
      ]
    },
    "splunkObservability": {
      "description": "Splunk Observability configuration",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "realm": {
          "description": "Splunk Observability Realm",
          "example": "us0",
          "type": "string"
        },
        "accessToken": {
          "description": "Splunk Observability Access Token",
          "type": "string"
        },
        "ingestUrl": {
          "type": "string"
        },
        "apiUrl": {
          "type": "string"
        },
        "metricsEnabled": {
          "description": "Send Metrics to Splunk Observability",
          "type": "boolean"
        },
        "tracesEnabled": {
          "description": "Send Traces to Splunk Observability",
          "type": "boolean"
        },
        "logsEnabled": {
          "description": "Send Logs to Splunk Observability",
          "type": "boolean"
        },
        "profilingEnabled": {
          "description": "Whether profiling data is enabled for Splunk Observability",
          "type": "boolean"
        },
        "infrastructureMonitoringEventsEnabled": {
          "description": "Send Kubernetes events to Splunk Observability Infrastructure Monitoring",
          "type": "boolean"
        }
      },
      "anyOf": [
        {
          "properties": {
            "metricsEnabled": {
              "const": true
            }
          }
        },
        {
          "properties": {
            "tracesEnabled": {
              "const": true
            }
          }
        },
        {
          "properties": {
            "logsEnabled": {
              "const": true
            }
          }
        },
        {
          "properties": {
            "profilingEnabled": {
              "const": true
            }
          }
        }
      ]
    },
    "logsEngine": {
      "description": "Logs collection engine",
      "type": "string",
      "enum": [
        "fluentd",
        "otel"
      ]
    },
    "cloudProvider": {
      "description": "Cloud provider where the collector is running",
      "type": "string",
      "enum": [
        "aws",
        "gcp",
        "azure",
        " ",
        ""
      ]
    },
    "provider": {
      "description": "[DEPRECATED] Cloud provider where the collector is running",
      "type": "string",
      "deprecated": true
    },
    "distribution": {
      "description": "Kubernetes distribution where the collector is running",
      "type": "string",
      "$comment": "Please ensure clusterName is set to the proper required/optional value when modifying this list",
      "enum": [
        "eks",
        "eks/fargate",
        "gke",
        "gke/autopilot",
        "aks",
        "openshift",
        " ",
        ""
      ]
    },
    "distro": {
      "description": "[DEPRECATED] Kubernetes distribution where the collector is running",
      "type": "string",
      "deprecated": true
    },
    "environment": {
      "description": "Parameter that will be added to all the telemetry data (traces/logs/metrics) as an attribute.",
      "type": "string"
    },
    "autodetect": {
      "description": "Automatic detection of additional metric sources.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "controlPlane": {
          "type": "boolean",
          "deprecated": true
        },
        "prometheus": {
          "type": "boolean"
        },
        "istio": {
          "type": "boolean"
        }
      }
    },
    "extraAttributes": {
      "description": "Additional metadata that will be added to all the telemetry as extra attributes.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "podLabels": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "fromLabels": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "fromAnnotations": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "custom": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "name",
              "value"
            ],
            "additionalProperties": false,
            "properties": {
              "name": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "agent": {
      "description": "Splunk OpenTelemetry Collector agent configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "controlPlaneEnabled": {
          "type": "boolean",
          "deprecated": true
        },
        "controlPlaneMetrics": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "apiserver": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              }
            },
            "controllerManager": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              }
            },
            "coredns": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              }
            },
            "etcd": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "secret": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "name": {
                      "type": "string"
                    },
                    "create": {
                      "type": "boolean"
                    },
                    "clientCert": {
                      "type": "string"
                    },
                    "clientKey": {
                      "type": "string"
                    },
                    "caFile": {
                      "type": "string"
                    }
                  }
                },
                "skipVerify": {
                  "type": "boolean"
                }
              },
              "allOf": [
                {
                  "if": {
                    "$comment": "if etcd metrics are enabled",
                    "properties": {
                      "enabled": {
                        "const": true
                      }
                    }
                  },
                  "then": {
                    "if": {
                      "$comment": "if the helm chart will create the etcd k8s secret",
                      "properties": {
                        "secret": {
                          "properties": {
                            "create": {
                              "const": true
                            }
                          }
                        }
                      }
                    },
                    "then": {
                      "$comment": "then require a clientCert and clientKey that are not empty strings",
                      "properties": {
                        "secret": {
                          "properties": {
                            "clientCert": {
                              "minLength": 1
                            },
                            "clientKey": {
                              "minLength": 1
                            }
                          }
                        }
                      }
                    },
                    "else": {
                      "$comment": "then require a k8s secret name for a secret the user created that is not an empty string",
                      "properties": {
                        "secret": {
                          "properties": {
                            "name": {
                              "minLength": 1
                            }
                          }
                        }
                      }
                    }
                  }
                }
              ]
            },
            "proxy": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              }
            },
            "scheduler": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "enabled": {
                  "type": "boolean"
                }
              }
            }
          }
        },
        "ports": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "containerPort": {
                  "type": "integer"
                },
                "hostPort": {
                  "type": "integer"
                },
                "protocol": {
                  "type": "string"
                },
                "enabled_for": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": [
                      "traces",
                      "metrics",
                      "logs",
                      "profiling"
                    ]
                  }
                }
              }
            }
          }
        },
        "resources": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "limits": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            },
            "requests": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            }
          }
        },
        "securityContext": {
          "type": "object"
        },
        "updateStrategy": {
            "type": "string",
            "enum": [
                "OnDelete",
                "RollingUpdate"
            ]
        },
	      "maxUnavailable": {
	        "oneOf": [
	          {
	            "type": "string"
            },
            {
	            "type": "integer"
	          }
	        ]
	      },
        "service": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            }
          }
        },
        "hostNetwork": {
          "description": "Host network allows container to use networking stack of the host machine",
          "type": "boolean"
        },
        "skipInitContainers": {
          "description": "Skip init containers",
          "type": "boolean"
        },
        "annotations": {
          "type": "object"
        },
        "discovery": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "properties": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "extensions": {
                  "type": "object",
                  "additionalProperties": true
                },
                "receivers": {
                  "type": "object",
                  "additionalProperties": true
                }
              }
            }
          }
        },
        "podAnnotations": {
          "type": "object"
        },
        "podLabels": {
          "type": "object"
        },
        "extraEnvs": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "extraVolumes": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "extraVolumeMounts": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "featureGates": {
          "type": "string"
        },
        "config": {
          "type": "object"
        }
      }
    },
    "otelAgent": {
      "description": "[DEPRECATED] Splunk OpenTelemetry Collector agent configuration.",
      "type": "object",
      "deprecated": true
    },
    "clusterReceiver": {
      "description": "Splunk OpenTelemetry Collector cluster receiver configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "resources": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "limits": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            },
            "requests": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            }
          }
        },
        "nodeSelector": {
          "type": "object"
        },
        "tolerations": {
          "type": "array"
        },
        "affinity": {
          "type": "object"
        },
        "securityContext": {
          "type": "object"
        },
        "terminationGracePeriodSeconds": {
          "type": "integer"
        },
        "priorityClassName": {
          "type": "string"
        },
        "annotations": {
          "type": "object"
        },
        "podAnnotations": {
          "type": "object"
        },
        "k8sEventsEnabled": {
          "description": "[DEPRECATED] Use eventsEnabled instead.",
          "type": "boolean",
          "deprecated": true
        },
        "eventsEnabled": {
          "description": "[DEPRECATED] Use k8sObjects instead.",
          "type": "boolean",
          "deprecated": true
        },
        "k8sObjects": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "podLabels": {
          "type": "object"
        },
        "extraEnvs": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "extraVolumes": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "extraVolumeMounts": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "featureGates": {
          "type": "string"
        },
        "config": {
          "type": "object"
        }
      }
    },
    "otelK8sClusterReceiver": {
      "description": "[DEPRECATED] Splunk OpenTelemetry Collector cluster receiver configuration.",
      "type": "object",
      "deprecated": true
    },
    "logsCollection": {
      "description": "Native OpenTelemetry logs collection configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "containers": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "containerRuntime": {
              "type": "string"
            },
            "excludePaths": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "excludeAgentLogs": {
              "type": "boolean"
            },
            "extraOperators": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "useSplunkIncludeAnnotation": {
              "type": "boolean"
            },
            "multilineConfigs": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "maxRecombineLogSize": {
              "type": "integer"
            }
          }
        },
        "journald": {
          "description": "Configuration to collect journald logs",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "directory": {
              "type": "string"
            },
            "index": {
              "type": "string"
            },
            "units": {
              "type": "array",
              "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "priority": {
                    "type": [
                      "string",
                      "integer"
                    ]
                  }
                }
              }
            }
          }
        },
        "checkpointPath": {
          "type": "string"
        },
        "extraFileLogs": {
          "type": "object"
        }
      }
    },
    "fluentd": {
      "description": "Fluentd sidecar configuration for logs collection.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "resources": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "limits": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            },
            "requests": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            }
          }
        },
        "securityContext": {
          "type": "object"
        },
        "extraEnvs": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "config": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "containers": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "path": {
                  "type": "string"
                },
                "pathDest": {
                  "type": "string"
                },
                "logFormatType": {
                  "type": "string"
                },
                "criTimeFormat": {
                  "type": "string"
                }
              }
            },
            "journalLogPath": {
              "type": "string"
            },
            "buffer": {
              "type": "object"
            },
            "logLevel": {
              "type": "string",
              "enum": [
                "trace",
                "debug",
                "info",
                "warn",
                "error"
              ]
            },
            "path": {
              "type": "string"
            },
            "excludePath": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "posFilePrefix": {
              "type": "string"
            },
            "refreshInterval": {
              "type": "integer"
            },
            "enableStatWatcher": {
              "type": "boolean"
            },
            "customFilters": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "tag": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string"
                    },
                    "body": {
                      "type": "string"
                    }
                  }
                }
              }
            },
            "logs": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "object",
                  "additionalProperties": false,
                  "properties": {
                    "from": {
                      "type": "object"
                    },
                    "timestampExtraction": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "regexp": {
                          "type": "string"
                        },
                        "format": {
                          "type": "string"
                        }
                      }
                    },
                    "multiline": {
                      "type": "object",
                      "additionalItems": false,
                      "properties": {
                        "firstline": {
                          "type": "string"
                        },
                        "flushInterval": {
                          "type": "string"
                        }
                      }
                    },
                    "sourcetype": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "image": {
      "description": "Docker image configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "imagePullSecrets": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "fluentd": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "pullPolicy": {
              "type": "string",
              "enum": [
                "IfNotPresent",
                "Always",
                "Never"
              ]
            },
            "initContainer": {
              "type": "object",
              "deprecated": "true"
            }
          }
        },
        "otelcol": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "pullPolicy": {
              "type": "string",
              "enum": [
                "IfNotPresent",
                "Always",
                "Never"
              ]
            }
          }
        },
         "initPatchLogDirs": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "pullPolicy": {
              "type": "string",
              "enum": [
                "IfNotPresent",
                "Always",
                "Never"
              ]
            }
          }
        }
      }
    },
    "podDisruptionBudget": {
      "description": "Limits number of pods may be unavailable due to voluntary disruptions.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "minAvailable": {
          "type": [
            "integer",
            "string"
          ]
        },
        "maxUnavailable": {
          "type": [
            "integer",
            "string"
          ]
        }
      }
    },
    "serviceAccount": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "create": {
          "type": "boolean"
        },
        "name": {
          "type": "string"
        },
        "annotations": {
          "type": "object"
        }
      }
    },
    "rbac": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "create": {
          "type": "boolean"
        },
        "customRules": {
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      }
    },
    "secret": {
      "description": "Kubernetes secret resource configuration",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "create": {
          "type": "boolean"
        },
        "name": {
          "type": "string"
        },
        "validateSecret": {
          "type": "boolean"
        }
      }
    },
    "tolerations": {
      "type": "array",
      "items": {
        "type": "object"
      }
    },
    "nodeSelector": {
      "type": "object"
    },
    "terminationGracePeriodSeconds": {
      "type": "integer"
    },
    "affinity": {
      "description": "Defines node affinity to restrict deployment of the o11y collector daemonset.",
      "type": "object"
    },
    "priorityClassName": {
      "type": "string"
    },
    "readinessProbe": {
      "type": "object"
    },
    "livenessProbe": {
      "type": "object"
    },
    "isWindows": {
      "description": "Apply for k8s cluster with windows worker node.",
      "type": "boolean"
    },
    "securityContextConstraints": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "create": {
          "type": "boolean"
        }
      }
    },
    "securityContextConstraintsOverwrite": {
      "description": "Openshift SecurityContextConstraints can be overriden in this field.",
      "type": "object"
    },
    "gateway": {
      "description": "Splunk OpenTelemetry Collector gateway deployment configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "replicaCount": {
          "type": "integer"
        },
        "ports": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "containerPort": {
                  "type": "integer"
                },
                "hostPort": {
                  "type": "integer"
                },
                "protocol": {
                  "type": "string"
                },
                "enabled_for": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "enum": [
                      "traces",
                      "metrics",
                      "logs",
                      "profiling"
                    ]
                  }
                }
              }
            }
          }
        },
        "resources": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "limits": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            },
            "requests": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "cpu": {
                  "type": [
                    "string",
                    "integer"
                  ]
                },
                "memory": {
                  "type": "string"
                }
              }
            }
          }
        },
        "nodeSelector": {
          "type": "object"
        },
        "tolerations": {
          "type": "array"
        },
        "affinity": {
          "type": "object"
        },
        "securityContext": {
          "type": "object"
        },
        "terminationGracePeriodSeconds": {
          "type": "integer"
        },
        "priorityClassName": {
          "type": "string"
        },
        "annotations": {
          "type": "object"
        },
        "podAnnotations": {
          "type": "object"
        },
        "podLabels": {
          "type": "object"
        },
        "extraEnvs": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "extraVolumes": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "extraVolumeMounts": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "featureGates": {
          "type": "string"
        },
        "config": {
          "type": "object"
        }
      }
    },
    "otelCollector": {
      "description": "[DEPRECATED] Splunk OpenTelemetry Collector gateway deployment configuration.",
      "type": "object",
      "deprecated": true
    },
    "service": {
      "description": "Splunk OpenTelemetry collector service configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "ClusterIP",
            "NodePort",
            "LoadBalancer",
            "ExternalName"
          ]
        },
        "annotations": {
          "type": "object"
        }
      }
    },
    "splunkRealm": {
      "description": "[DEPRECATED] Splunk Observability Realm",
      "type": "string",
      "deprecated": true
    },
    "splunkAccessToken": {
      "description": "[DEPRECATED] Splunk Observability Access Token",
      "type": "string",
      "deprecated": true
    },
    "ingestUrl": {
      "description": "[DEPRECATED] Splunk Observability ingest URL.",
      "type": "string",
      "deprecated": true
    },
    "apiUrl": {
      "description": "[DEPRECATED] Splunk Observability API URL.",
      "type": "string",
      "deprecated": true
    },
    "metricsEnabled": {
      "description": "[DEPRECATED] Send Metrics to Splunk Observability",
      "type": "boolean",
      "deprecated": true
    },
    "tracesEnabled": {
      "description": "[DEPRECATED] Send Traces to Splunk Observability",
      "type": "boolean",
      "deprecated": true
    },
    "logsEnabled": {
      "description": "[DEPRECATED] Send Logs to Splunk Observability",
      "type": "boolean",
      "deprecated": true
    },
    "operatorcrds": {
      "description": "Deploys Operator related CRDs from https://github.com/open-telemetry/opentelemetry-operator/tree/main/config/crd via a Helm subchart and using the chart crds/ directory.",
      "type": "object",
      "properties": {
        "install": {
          "type": "boolean"
        }
      }
    },
    "operator-crds": {
      "description": "Configuration for operator-crds (legacy). Prefer using 'operatorcrds' for new installations. Deploys Operator related CRDs from https://github.com/open-telemetry/opentelemetry-operator/tree/main/config/crd via a Helm subchart and using the chart crds/ directory.",
      "type": "object",
      "properties": {
        "install": {
          "type": "boolean"
        }
      }
    },
    "operator": {
      "description": "OpenTelemetry Operator configuration. A subchart that is used to install the operator, see https://github.com/open-telemetry/opentelemetry-helm-charts/blob/main/charts/opentelemetry-operator/values.schema.json for more info.",
      "type": "object",
      "additionalProperties": true
    },
    "opentelemetry-operator": {
      "description": "OpenTelemetry Operator configuration (legacy). Prefer using 'operator' for new installations. This field is provided for backward compatibility with older Helm versions or custom distributions. A subchart that is used to install the operator, see https://github.com/open-telemetry/opentelemetry-helm-charts/blob/main/charts/opentelemetry-operator/values.schema.json for more info.",
      "type": "object",
      "additionalProperties": true
    },
    "instrumentation": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "endpoint": {
          "type": "string",
          "description": "Optional endpoint parameter for exporting data to a specific target."
        },
        "sampler": {
          "type": "object",
          "description": "Optional sampler parameter for enabling trace sampling.",
          "properties": {
            "type": {
              "type": "string"
            },
            "argument": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "env": {
          "type": "array",
          "description": "Optional environment variable parameters that can configure all instrumentation libraries.",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            },
            "required": ["name", "value"],
            "additionalProperties": false
          }
        },
        "java": {
          "type": "object",
          "description": "Configuration for Java Auto-instrumentation Library.",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "env": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "required": ["name", "value"],
                "additionalProperties": false
              }
            }
          },
          "required": ["repository", "tag"]
        },
        "nodejs": {
          "type": "object",
          "description": "Configuration for Node.js Auto-instrumentation Library.",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "env": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "required": ["name", "value"],
                "additionalProperties": false
              }
            }
          },
          "required": ["repository", "tag"]
        },
        "dotnet": {
          "type": "object",
          "description": "Configuration for .NET Auto-instrumentation Library.",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "env": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "required": ["name", "value"],
                "additionalProperties": false
              }
            }
          },
          "required": ["repository", "tag"]
        },
        "go": {
          "type": "object",
          "description": "Configuration for Go Auto-instrumentation Library.",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "env": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "required": ["name", "value"],
                "additionalProperties": false
              }
            }
          },
          "required": ["repository", "tag"]
        },
        "apache-httpd": {
          "type": "object",
          "description": "Configuration for Apache HTTPD Auto-instrumentation Library.",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "env": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "required": ["name", "value"],
                "additionalProperties": false
              }
            }
          },
          "required": ["repository", "tag"]
        },
        "python": {
          "type": "object",
          "description": "Configuration for Python Auto-instrumentation Library.",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "env": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "required": ["name", "value"],
                "additionalProperties": false
              }
            }
          },
          "required": ["repository", "tag"]
        },
        "nginx": {
          "type": "object",
          "description": "Configuration for NGINX Auto-instrumentation Library.",
          "additionalProperties": false,
          "properties": {
            "repository": {
              "type": "string"
            },
            "tag": {
              "type": "string"
            },
            "env": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "value": {
                    "type": "string"
                  }
                },
                "required": ["name", "value"],
                "additionalProperties": false
              }
            }
          },
          "required": ["repository", "tag"]
        }
      }
    },
    "certmanager": {
      "description": "cert-manager adds certificates and certificate issuers as resource types in Kubernetes clusters, and simplifies the process of obtaining, renewing and using those certificates.",
      "type": "object",
      "additionalProperties": true
    },
    "cert-manager": {
      "description": "Configuration for cert-manager (legacy). Prefer using 'certmanager' for new installations. This field is included to support backward compatibility with older Helm versions or custom distributions. cert-manager adds certificates and certificate issuers as resource types in Kubernetes clusters, and simplifies the process of obtaining, renewing and using those certificates.",
      "type": "object",
      "additionalProperties": true
    },
    "targetAllocator": {
      "description": "Target Allocator configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "image": {
          "type": "string"
        },
        "serviceAccount": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "create": {
              "type": "boolean"
            },
            "name": {
              "type": "string"
            },
            "annotations": {
              "type": "object"
            }
          }
        },
        "config": {
          "type": "object",
          "additionalProperties": true
        }
      }
    },
    "featureGates": {
      "description": "Helm Chart Feature Gates.",
      "type": "object",
      "additionalProperties": true
    }
  },
  "allOf": [
    {
      "anyOf": [
        {
          "properties": {
            "splunkPlatform": {
              "type": "object",
              "properties": {
                "endpoint": {
                  "minLength": 1
                }
              }
            }
          }
        },
        {
          "properties": {
            "splunkObservability": {
              "type": "object",
              "properties": {
                "realm": {
                  "minLength": 1
                }
              }
            }
          }
        },
        {
          "properties": {
            "splunkRealm": {
              "description": "[DEPRECATED] Splunk Observability Realm",
              "type": "string",
              "deprecated": true,
              "minLength": 1
            }
          }
        }
      ]
    },
    {
      "if": {
        "properties": {
          "distribution": { "pattern": "^(gke|eks).*" }
        },
        "required": ["distribution"]
      },
      "then": {
        "properties": {
          "clusterName": {
            "minLength": 0
          }
        }
      },
      "else": {
        "$comment": "The clusterName is required if the distribution doesn't start with eks or gke.",
        "properties": {
          "clusterName": {
            "minLength": 1
          }
        }
      }
    },
    {
      "if": {
        "$comment": "if k8s secret resource created by the chart (default behavior)",
        "properties": {
          "secret": {
            "properties": {
              "create": {
                "const": true
              }
            }
          }
        }
      },
      "then": {
        "$comment": "then require tokens to be provided for every enabled destination",
        "properties": {
          "splunkObservability": {
            "if": {
              "properties": {
                "realm": {
                  "minLength": 1
                }
              }
            },
            "then": {
              "properties": {
                "accessToken": {
                  "minLength": 1
                }
              }
            }
          },
          "splunkPlatform": {
            "if": {
              "properties": {
                "endpoint": {
                  "minLength": 1
                }
              }
            },
            "then": {
              "properties": {
                "token": {
                  "minLength": 1
                }
              }
            }
          }
        }
      }
    },
    {
      "if": {
        "$comment": "if splunkPlatform.metricsEnabled is true and splunkPlatform.endpoint is provided",
        "properties": {
          "splunkPlatform": {
            "properties": {
              "endpoint": {
                "minLength": 1
              }
            }
          }
        }
      },
      "then": {
        "$comment": "then splunkPlatform.metricsIndex must be provided",
        "properties": {
          "splunkPlatform": {
            "if": {
              "properties": {
                "metricsEnabled": {
                  "const": true
                }
              }
            },
            "then": {
              "properties": {
                "metricsIndex": {
                  "minLength": 1
                }
              }
            }
          }
        }
      }
    },
    {
      "if": {
        "$comment": "if splunkPlatform.logsEnabled is true and splunkPlatform.endpoint is provided",
        "properties": {
          "splunkPlatform": {
            "properties": {
              "endpoint": {
                "minLength": 1
              }
            }
          }
        }
      },
      "then": {
        "$comment": "then splunkPlatform.index must be provided",
        "properties": {
          "splunkPlatform": {
            "if": {
              "properties": {
                "logsEnabled": {
                  "const": true
                }
              }
            },
            "then": {
              "properties": {
                "index": {
                  "minLength": 1
                }
              }
            }
          }
        }
      }
    }
  ]
}
